{% extends "bookmarks/base.html" %}

{% block title %}Tags{% endblock %}

{% partialdef tags-partial %}
  {% if htmx %}
    <title>Tags - HTMX</title>
    {% include "sidebar.html#nav-mobile-partial" %}
    {% include "sidebar.html#nav-desktop-partial" %}
    {% include "bookmarks/base.html#menu-partial" %}
  {% endif %}
  <div class="md:flex md:items-center md:justify-between">
  <div class="min-w-0 flex-1">
    <h1 class="text-2xl/7 font-bold sm:truncate sm:text-3xl sm:tracking-tight">Tags</h1>
  </div>
  </div>
  {% for tag in tags %}
    {% ifchanged tag.bucket %}
      {% if not forloop.first %}</ul>{% endif %}
      <div class="divider"></div>
      <h2 class="text-base font-semibold">{{ tag.bucket }}</h2>

      <ul class="flex flex-wrap gap-2 mt-2">
    {% endifchanged %}
  <li class="inline">
    <a
        href="{% url 'bookmarks:list' %}?tags={{ tag.name }}"
        hx-get="{% url 'bookmarks:list' %}?tags={{ tag.name }}"
        hx-push-url="true"
        hx-target="#id_content"
    >
    <span class="badge badge-primary badge-soft">{{ tag.name }} {{ tag.num_times }}</span>
    </a>
  </li>
  {% if forloop.last %}</ul>{% endif %}
  {% endfor %}
{% endpartialdef tags-partial %}

{% block content %}
  {% partial tags-partial %}
{% endblock content %}
