{% extends "stuff/base.html" %}
{% load partials %}

{% block title %}{{ item.name }}{% endblock %}

{% partialdef field-partial %}
<div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
    <dt class="text-sm font-medium text-gray-900">{{ label }}</dt>
    <dd class="mt-1 text-sm/6 text-gray-700 sm:col-span-2 sm:mt-0">{{ value }}</dd>
</div>
{% endpartialdef field-partial %}

{% partialdef bookmark-partial %}
<li class="flex items-center justify-between py-4 pr-5 pl-4 text-sm/6" >
    <div class="flex w-0 flex-1 items-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"></path>
        </svg>
        <div class="ml-4 flex min-w-0 flex-1 gap-2">
            <a href="{{ bookmark.url }}" target="_blank" rel="noreferrer" class="truncate font-medium text-indigo-600 hover:text-indigo-500">{{ bookmark.title }}</a>
            <span class="shrink-0 text-gray-400">{{ bookmark.created|date:'F Y'|lower }}</span>
        </div>
        <ul role="list" class="ml-4 shrink-0">
            {% for tag in bookmark.tags.all %}
                <li class="inline text-red-700">
                    <a href="{% url 'bookmarks:filter' %}?tags={{ tag }}"
                        hx-get="{% url 'bookmarks:filter' %}?tags={{ tag }}"
                        hx-push-url="true"
                        hx-target="#id_content" >{{ tag }}</a>
                </li>
            {% endfor %}
        </ul>
    </div>
</li>
{% endpartialdef bookmark-partial %}

{% partialdef detail-partial %}
{% if htmx %}
    <title>{{ item.name }} - HTMX</title>
    {% include "sidebar.html#nav-mobile-partial" %}
    {% include "sidebar.html#nav-desktop-partial" %}
    {% include "stuff/base.html#menu-partial" %}
{% endif %}
<div class="overflow-hidden bg-white shadow-sm sm:rounded-lg">
    <div class="px-4 py-6 sm:px-6">
        <h3 class="text-base/7 font-semibold text-gray-900">Item Detail</h3>
        <p class="mt-1 max-w-2xl text-sm/6 text-gray-500">Item details and links.</p>
    </div>
    <div class="border-t border-gray-100">
        <dl class="divide-y divide-gray-100">
            {% with label="Name" value=item.name %}
                {% partial field-partial %}
            {% endwith %}
            {% with label="Location" value=item.locations.all|join:", " %}
                {% partial field-partial %}
            {% endwith %}
            {% with label="On Hand" value=none %}
                {% partial field-partial %}
            {% endwith %}
            {% with label="Reorder Level" value=item.reorder_level %}
                {% partial field-partial %}
            {% endwith %}
            {% with label="Notes" value=item.notes %}
                {% partial field-partial %}
            {% endwith %}
            {% with label="Tags" value=item.tags.all|join:", " %}
                {% partial field-partial %}
            {% endwith %}
            <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm/6 font-medium text-gray-900">Bookmarks</dt>
                <dd class="mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    <ul role="list" class="divide-y divide-gray-100 rounded-md border border-gray-200">
                        {% for bookmark in item.bookmarks.all %}
                            {% partial bookmark-partial %}
                        {% endfor %}
                    </ul>
                </dd>
            </div>
        </dl>
    </div>
</div>
{% endpartialdef detail-partial %}

{% block content %}
  {% partial detail-partial %}
{% endblock content %}
